# FBV와 CBV

FBV(Function based view) : 말 그대로 함수에 기반을 둔 방법. 함수를 직접 만들어서 원하는 기능을 직접 구현할 수 있는 장점이 있다.
CBV(Class based view) : 장고가 제공하는 클래스를 활용해 구현하는 방법. 장고는 웹 개발을 할 때 반복적으로 많이 구현하는 것들을 클래스로 미리 만들어서 제공하고 있다. 이 클래스들을 활용하는 방법이다.

# FBV로 포스트 목록 페이지 만들기

## blog/urls.py 내용 추가하기

views.py에 index라는 함수를 만들어서 FBV로 구현할 것이다.

blog/urls.py

```python
from django.urls import path
from . import views

urlpatterns = [
    path('', views.index), # 추가
]
```

from . import views : 현재 폴더에 있는 views.py를 사용할 수 있게 가져오라는 뜻이다.
그리고 입력된 URL이 ‘blog/’로 끝난다면 임포트한 views.py에 정의되어 있는 index() 함수를 실행하도록 코드를 작성한다.

## blog/views.py에 index() 함수 정의하기

blog/views.py

```python
from django.shortcuts import render

def index(request):
    return render(
        request,
        'blog/index.html',
    )
```

현재 index() 함수가 하는 역할은 단순하다. 장고가 기본으로 제공하는 render() 함수를 사용해 템플릿 폴더에서 blog 폴더의 index.html 파일을 찾아 방문자에게 보내준다. 

## 템플릿 파일 만들기

blog/templates/blog 폴더를 새로 만든 다음 그 아래에 index.html을 만들어준다.

blog/templates/blog/index.html

```html
<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Blog</title>
</head>
<body>
  <h1>Blog</h1>
</body>
</html>
```

## 블로그 페이지에 포스트 목록 나열하기
여러 포스트를 나열해 보겠다. 다음과 같이 views.py를 수정한다.
models.py에 정의되어 있는 Post 모델을 임포트한다. 그리고 index()함수에서 Post.objects.all()로 모든 Post 레코드를 가져와 posts에 저장한다. 마지막으로 render() 함수 안에 posts를 딕셔너리 형태로 추가한다.
blog/views.py
```python
from django.shortcuts import render
from .models import Post    # 추가

def index(request):
    posts = Post.objects.all()  # 추가

    return render(
        request,
        'blog/index.html',
        {
            'posts': posts,     # 추가
        }
    )
```
Post.objects.all() : views.py에서 데이터베이스에 쿼리를 날려 원하는 레코드를 가져올 수 있다.

index.html 수정하겠다.